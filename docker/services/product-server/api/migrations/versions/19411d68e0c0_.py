"""empty message

Revision ID: 19411d68e0c0
Revises: 47fa5a613593
Create Date: 2023-06-21 23:17:45.652086

"""
from alembic import op
import sqlalchemy as sa
import json

# revision identifiers, used by Alembic.
revision = '19411d68e0c0'
down_revision = '47fa5a613593'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('app_theme',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('name', sa.String(length=100), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['user.id'], ),
    sa.ForeignKeyConstraint(['deleted_by'], ['user.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['user.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('app_theme_mode',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('deleted_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('mode', sa.String(length=100), nullable=False),
        sa.Column('bg_variant', sa.String(length=100), nullable=False),
    sa.Column('contrast_color', sa.String(length=100), nullable=False),
    sa.Column('chart_colors', sa.Text(), nullable=True),
        sa.Column('params', sa.Text(), nullable=True),
    sa.Column('app_theme_id', sa.Integer(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('updated_by', sa.Integer(), nullable=True),
    sa.Column('deleted_by', sa.Integer(), nullable=True),
    sa.ForeignKeyConstraint(['app_theme_id'], ['app_theme.id'], ),
    sa.ForeignKeyConstraint(['created_by'], ['user.id'], ),
    sa.ForeignKeyConstraint(['deleted_by'], ['user.id'], ),
    sa.ForeignKeyConstraint(['updated_by'], ['user.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_app_theme_mode_app_theme_id'), 'app_theme_mode', ['app_theme_id'], unique=False)
    op.add_column('app', sa.Column('theme_id', sa.Integer(), nullable=True))
    op.create_foreign_key('app_theme_id_fkey', 'app', 'app_theme', ['theme_id'], ['id'])

    for i, el in enumerate(initial_theme_data):
        if i%2 == 0:
            op.execute(f'''INSERT INTO public.app_theme (name) VALUES('{el['name']}');''')

        op.execute(
            f'''INSERT INTO public.app_theme_mode (mode, bg_variant, contrast_color, chart_colors, params, app_theme_id) select '{el['mode']}', '{el['bg_variant']}', '{el['contrast_color']}', '{json.dumps(el['chart_colors'])}', '{json.dumps({})}', id from app_theme where name='{el['name']}';''')

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint('app_theme_id_fkey', 'app', type_='foreignkey')
    op.drop_column('app', 'theme_id')
    op.drop_index(op.f('ix_app_theme_mode_app_theme_id'), table_name='app_theme_mode')
    op.drop_table('app_theme_mode')
    op.drop_table('app_theme')
    # ### end Alembic commands ###


initial_theme_data = [
    {
        "name": "Red",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#CC4354",
        "chart_colors": [
            "#CC4354",
            "#F66796",
            "#F6BD79",
            "#736CD6",
            "#9FBBFF",
            "#D091FC",
            "#83BD63",
            "#CBE28D",
            "#60C29F",
            "#F7E3E5"
            ]
        },
    {
        "name": "Red",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#D03C4E",
        "chart_colors": [
            "#D03C4E",
            "#E56590",
            "#E7B376",
            "#6F67D2",
            "#92ACEE",
            "#B983E0",
            "#82BB62",
            "#CBE28D",
            "#60C29F",
            "#CDB8B8"
            ]
        },
    {
        "name": "Blue",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#1373E5",
        "chart_colors": [
            "#1373E5",
            "#A59CFD",
            "#62C6FC",
            "#FC6B96",
            "#F99992",
            "#FCA9F4",
            "#CAE882",
            "#80D388",
            "#EFE47E",
            "#D7CDBD"
            ]
        },
    {
        "name": "Blue",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#287DE1",
        "chart_colors": [
            "#308FFF",
            "#A384FC",
            "#62C6FC",
            "#FC6B96",
            "#FE9088",
            "#DA81D1",
            "#A3BD59",
            "#5EB567",
            "#DCD16C",
            "#6E6E82"
            ]
        },
    {
        "name": "Yellow",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#FFBF00",
        "chart_colors": [
            "#FFBF00",
            "#F8B15E",
            "#C2D355",
            "#B786F5",
            "#8375E9",
            "#F363A8",
            "#52ECBE",
            "#8AD3ED",
            "#2CACA4",
            "#B5B3C2"
            ]
        },
    {
        "name": "Yellow",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#EDCE65",
        "chart_colors": [
            "#EDCE65",
            "#EA9D42",
            "#BFCC6B",
            "#A37FD7",
            "#7065C8",
            "#CF5692",
            "#8AD3ED",
            "#45CAA4",
            "#25938E",
            "#AAA7B9"
            ]
        },
    {
        "name": "Green",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#37BE8F",
        "chart_colors": [
            "#37BE8F",
            "#A6D8FB",
            "#B3E78D",
            "#C084EB",
            "#FC8AD2",
            "#8980EB",
            "#F88981",
            "#F8C67D",
            "#FD9CB8",
            "#EADEC9"
            ]
        },
    {
        "name": "Green",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#0FC183",
        "chart_colors": [
            "#0FC183",
            "#80C4F2",
            "#BFF299",
            "#C584F4",
            "#FD7DCE",
            "#948DE7",
            "#E76043",
            "#E5AA52",
            "#F28AA8",
            "#56605C"
            ]
        },
    {
        "name": "Purple",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#8257FC",
        "chart_colors": [
            "#8257FC",
            "#70A1FC",
            "#E69DFF",
            "#F6BB75",
            "#EF9880",
            "#F96CAC",
            "#D9F196",
            "#94C077",
            "#72D2CD",
            "#8DE6E7"
            ]
        },
    {
        "name": "Purple",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#AA8EFC",
        "chart_colors": [
            "#7D61D2",
            "#608BDB",
            "#C387DB",
            "#FEAB49",
            "#DE775D",
            "#D45190",
            "#B8CE82",
            "#7EA468",
            "#73C0B7",
            "#484661"
            ]
        },
    {
        "name": "Orange",
        "mode": "light",
        "bg_variant": "v2",
        "contrast_color": "#FCA74A",
        "chart_colors": [
            "#FCA74A",
            "#FA8585",
            "#F0E18C",
            "#C6A2F3",
            "#A397F3",
            "#FFA0CE",
            "#BEF49A",
            "#7BDAC9",
            "#ADDDFF",
            "#E2DACB"
            ]
        },
    {
        "name": "Orange",
        "mode": "dark",
        "bg_variant": "v2",
        "contrast_color": "#EE9636",
        "chart_colors": [
            "#EE9636",
            "#E56669",
            "#D9C96B",
            "#A87BE3",
            "#7065C9",
            "#CF5692",
            "#9ED97B",
            "#65C0B1",
            "#4C9FDA",
            "#CAC1B2"
            ]
        }
    ]
